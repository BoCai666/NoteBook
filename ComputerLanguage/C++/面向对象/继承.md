# 继承

## 1.简介

**语法：**`class 子类 : 继承方式 父类`

```c++
class Animal() {};
class Dog: public Animal
{

};
```

**继承方式：**

- 公共继承

  ```c++
  class Base
  {
  public:
      int a;
  protected:
      int b;
  private:
      int c;
  };
  // 公共继承，将基类的public，protected的成员以原访问权限继承下来，私有不可继承
  class Son: public Base 
  {
  public:
      int a;
  protected:
      int b;
  };
  ```

- 保护继承

  ```c++
  // 保护继承，将基类的public，protected的成员以protected形式继承下来，私有不可继承
  class Son: protected Base 
  {
  protected:
      int a;
  	int b;
  };
  ```

- 私有继承

  ```c++
  // 私有继承，将基类的public，protected的成员以private形式继承下来，私有不可继承
  class Son: private Base 
  {
  private:
      int a;
      int b;
  };
  ```


## 2.虚继承

在继承前加上`virtual`关键字

```c++
class  A
{
public:
    int age;
};

// 虚继承：A被称为虚基类
class  B : virtual public A
{
};
```



## 3.菱形继承

当一个基类a有两派生类b，c，这两派生类又有一个共同的派生类d时，形成菱形继承。

- 当两父类有相同数据时，会导致子类有两份数据（虚继承可解决此问题）
- 当虚继承，两父类有相同数据时，子类继承的是两个vbptr（虚基类指针，指向vbtable 虚基类表，存储了这个数据的偏移）两个vbptr拿到的偏移值换算最终都指向基类a中由b，c继承的数据

```c++
class  A
{
public:
    int age;
};

class  B : virtual public A
{
};

class  C : virtual public A
{
};

// 多继承
class D : public B, public C
{
};

int main()
{
    D d;
    cout << d.age << endl; // 若不是虚继承 则会报错，不明确，编译器不清楚此age是基类B的还是基类C的
     d.B::age = 10;
     d.C::age = 20;
    cout << d.B::age << endl;
    cout << d.C::age << endl;
    return 0;
}
```

