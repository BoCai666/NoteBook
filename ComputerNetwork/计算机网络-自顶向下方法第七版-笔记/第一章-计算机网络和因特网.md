# 第一章 计算机网络与因特网
## 1.1 什么是因特网
- **1.1.1 具体构成：** 主机或端系统通过通信链路和分组交换机连接在一起
  - **分组：** packet，发送端将数据分段，并每段加上首部字节，形成的信息包。
  - **分组交换机：** 路由器和链路层交换机
  - **ISP：** Internet Service Provider 因特网服务提供商
  - **TCP/IP协议：** 端系统、分组交换机和其他的因特网部件运行的协议，控制信息的接收和发送。
- **1.1.2 服务描述：** 根据基础设施向分布式应用程序提供服务。 
  - **套接字接口：** socket interface，规定了一个端系统的程序请求因特网基础设施向运行在另一个端系统上的特定目的地程序交付数据的方式。
- **1.1.3 什么是协议：** 定义在两个或多个通信实体间的交换的报文格式和顺序，及报文发送或接收一条报文或其他事件所采取的动作。

## 1.2 网络边缘
- **1.2.1 接入网：** 将端系统物理连接到其边缘路由器的网络。
  - **家庭接入：** DSL（数字用户线）、电缆、FTTH（光纤到户）、拨号、卫星
  - **企业（和家庭）接入：** 以太网、WiFi 
  - **广域无线接入：** 3G、4G LTE、5G
- **1.2.2 物理媒介：** 电气信号、光信号、电磁波信号
  - **导引型媒体：** 电波沿着固体媒体前行，如光缆、双铜绞线或同轴电缆。
  - **非导引型媒体：** 电波在空气或外层空间传播，如无线局域网或数字卫星频道中。

## 1.3 网络核心
  - **1.3.1 分组交换：** 端系统间交换报文是源将长报文分成小的数据块（分组），分组在源和目的地间，等待通信链路和分组交换机按需传输。
    - **存储转发传输：** 交换机在可向输出链路传输分组的第一个比特前，必须接收到整个分组。
    - **排队时延：** 分组交换机有一个输出队列，用于存储路由器准备发向下一个链路的分组，当链路正在忙于处理其他分组时，该分组就需在输出队列中等待，从而产生了排队时延。
    - **分组丢失：** 由于输出队列空间有限，当分组到达时发现队列已满，就会出现分组丢失（丢包），丢弃该分组或者队列中的分组之一。
    - **转发表和路由选择协议：** 转发表用于将分组的中的目的地址（IP地址）映射成为输出链路。路由选择协议用于自动设置路由器中的转发表。
  - **1.3.2 电路交换：** 源和目的地的通信链路预留给通信双方，链路上的所有资源都被两个通信端点所独占。
    - **频分复用（FDM）：** 链路的频谱由跨越链路创建的所有连接共享，每条连接专用一个频段，频段的宽度即为带宽。
    - **时分复用（TDM）：** 时间划分为固定长度的帧，每帧划分为固定数量的时隙，每个连接地占用每帧中固定的一个时隙，该时隙用于传输连接的数据。
  - **1.3.3 网络的网络：** 现今的网络结构复杂，由十多个第一层ISP和数十万个较低层的ISP组成。ISP覆盖的区域多种多样，较低层的ISP与较高层的ISP相连，较高层ISP彼此互联。用户和内容提供商都是较低层ISP的客户，较低层ISP则是较高层ISO的客户。主要的内容提供商也可能创建自己的网络，与较低层的ISP互联。

## 1.4 分组交换网络中的时延、丢包和吞吐量
  - **1.4.1 分组交换网中的时延概述**
    - **节点处理时延：** 检查分组首部和决定将分组导向何处所需的时间。
    - **排队时延：** 分组在队列中等待传输的时间。
    - **传输时延：** 将分组的所有比特推向链路所需的时间。
    - **传播时延：** 一个比特从链路的起点到终点所需的时间。
  - **1.4.2 排队时延和丢包** 
    - **流量强度：** 假定所有分组都是由L比特组成，a表示分组到达队列的平均速率（分组/s，pkt/s），R表示队列中推出比特的速率（bps），则比特到达队列的平均速率为La（bps），La/R称为流量强度。
  - **1.4.3 端到端时延**
    - 端系统、应用程序或其他时延
  - **1.4.4 计算机网络中的吞吐量**
    - **瞬时吞吐量：** 在任何时间瞬间主机接收数据的速率（bps）
    - **平均吞吐量：** 假定主机接收F比特用去T秒，则平均吞吐量为F/T bps
    - **源到目的地的吞吐量：** 取决于链路中的最小传输速率（在没有其他干扰流量的情况下）

## 1.5 协议层次及其服务模型
  - **1.5.1 分层的体系结构**
    - **协议分层：** 因特网的协议栈分为物理层、链路层、网络层、运输层、应用层。
      - **应用层：** 是网络应用程序及它们的应用层协议存留的地方。包括HTTP、SMTP、FTP、DNS等协议，位于应用层的信息分组称为报文。
      - **运输层：** 在应用程序端点之间传输应用层报文，有TCP和UDP两种协议，TCP提供面向连接服务和拥塞控制机制，UDP提供无连接的服务。位于运输层的信息分组称为报文段。
      - **网络层：** 将数据报从一台主机移动到另一台主机，有IP协议、路由选择协议，位于网络层的信息分组称为数据报。
      - **链路层：** 将数据报从一个节点移动到相邻节点，一个数据报可能被沿途的不同链路的不同链路层协议处理，有以太网、WiFi、链路层交换机等，位于链路层的信息分组称为帧。
      - **物理层：** 将帧中的一个个比特从一个节点移动到下一个节点，该层协议与链路的实际传输媒体有关，如双绞线、同轴电缆、光纤等，在这些链路上移动一个比特的方式是不同的。
    - **OSI模型：** 开放系统互连模型，共有七层，分别是物理层、数据链路层、网络层、传输层、会话层、表示层、应用层。
      - **表示层：** 使通信的应用程序能够解释交换数据的含义，包括数据压缩、加密、数据描述（解决不同计算机中表示或存储的内部格式不同的问题）。
      - **会话层：** 提供数据交换的定界和同步功能，包括建立检查点和恢复方案的方法
    - **封装：** 每层的分组有两种类型的字段分别是首部字段和有效载荷字段（来自上一层的分组），一个大报文可能被划分为多个运输层报文段（每个报文段可能分为多个网络层数据报），接收端需从连续的数据报中重构一个报文段

## 1.6 面对攻击的网络
  - **DoS攻击：** Denial-of-Service，拒绝服务攻击，使得网络、主机和其他基础设置部分不能被合法用户使用，具体有以下三种类型
    - **弱点攻击：** 向目标主机一个易受攻击的应用程序或操作系统发送制作精细的报文，使其停止运行或崩溃。
    - **带宽洪泛：** 向目标主机发送大量的分组，使得目标的接入链路变的拥塞，导致合法的分组无法到达目标主机。但单一主机无法产生足够的大的流量来占满目标的接入链路，并且容易被发现，因此出现DDos，分布式拒绝服务攻击，通过多个主机向目标主机发送大量的分组，使得目标主机的带宽被占满，无法处理合法的分组。
    - **连接洪泛：** 在目标主机中创建大量半开或全开的TCP连接，使得目标主机的TCP连接表被填满，导致合法的TCP连接无法建立。

## 个人总结
