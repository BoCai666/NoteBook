# 第四章 用户界面
## 4.1 用户界面系统的比较
- **UGUI：** 第一版unity官方ui系统，公认的性能最好的ui系统，部分开源。
- **FairyGUI：** 脱离unity编辑环境的第三方ui系统，跨引擎的ui系统，支持多个引擎，但有一定的性能问题
- **NGUI：** 一款Unity的插件，开源可定制化修改，但版本比较老已逐步被淘汰
- **UI ToolKit（UI Elements）：** 第二版unity官方ui系统，处于实验阶段，未普及。

## 4.2 UGUI系统的原理及其组件使用
- **运行原理：** 通过3D网格来渲染ui元素，一个按钮、图片都会先构建一个方形网格，再将图片放入材质球，材质球绑定在网格中。为了减少drawcall，ugui会尽量使用相同着色器的材质球，将相同类型的图片合成一张图集，由于模型显示层级有前后遮挡关系，ugui不会将所有元素合并为一个网格和材质球，而是会将相同层级的且材质球参数相同的ui元素合并成一个网格，且是一个静止的网格，若改变了任何元素都将会触发ugui重建网格，因此减少网格重建，合并更多的ui元素可以有更好的性能。
- **系统组件**
  - **Canvas：** 画布组件，用于合并画布下的各类ui元素。
    - **合并规则：** 相同层级的且相同材质球ui元素合并，相同层级非Inspector面板下节点的层级，而是覆盖层级，比如两个ui元素重叠则认为它们是上下层关系，将所有重叠的层级数排列顺序计算完毕后，依次在每一层内合并该层的ui元素。`注意：z轴不为0的ui元素会单独提出来渲染，不参与合并`。
    - **渲染模式：**RenderMode
      - Overlay：覆盖模式，不与空间上的排序有任何关系，其前后位置对ui元素不起作用，而是通过SortingOrder来控制前后关系，其值越大越靠前渲染。
      - **Screen Camera：** 相机模式，最常用的渲染模式，可与非ui物体进行混合渲染
      - World：世界模式