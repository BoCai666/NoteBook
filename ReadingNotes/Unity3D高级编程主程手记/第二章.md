## 2.1 Unity3D中C#的底层原理
本节介绍的是Unity运行C#程序的两种机制，以及其它们的区别和原理
- **Mono：** 是一个跨平台.Net框架的实现。Unity中通过将C#代码编译成IL代码，然后运行在Mono虚拟机上，再由虚拟机转译成机器码执行。IL三种转译模式
  - Just-in-time(JIT)：即时编译，在程序运行过程中将IL代码转译成机器码执行。
  - Ahead-of-time(AOT)：预编译，将IL代码转译成机器码并存储在文件中，但此文件不能完全独立运行，该模式可以产生绝大部分JIT模式所产生的机器码，但还是有部分代码需要JIT模式运行。
  - 完全静态编译：此模式只支持少数平台，基于AOT模式更进一步产生所有的机器码，让程序运行时完全不需要JIT，适用于ios、xbox360等不支持JIT的操作系统。
- **IL2CPP：** 将IL代码转译成C++代码。Unity通过Mono将C#编译成IL代码，再有IL2CPP转译成C++代码，最后由各平台的C++编译器编译成机器码执行。IL2CPP也有虚拟机不用于执行代码，而是做内存管理。
## 2.2 List源码剖析
## 2.3 Dictionary源码剖析
## 2.4 浮点数的精度问题
- 存储方式：以二进制的科学计数法形式存储，公式如下。
  - f = -1^s * M * 2^E
  - s：符号位，0表示正数，1表示负数
  - M：尾数，小数部分
  - E：指数，整数部分
- 计算方式：浮点数十进制转二进制，整数部分采用除2取整法，小数部分采用乘2取整法。如9.625->1001.101->1.001101*2^3
- 精度问题
  - 尾数能表达的位数有限
    - 二进制无法精确表示一些十进制的小数，如0.1，0.2等，因为非0.5的小数在二进制中都是无限循环的，因此在计算机中只能取近似值。
    - 即使浮点数全是整数，当整数超出浮点数的范围时也会出现无法准确表达的问题